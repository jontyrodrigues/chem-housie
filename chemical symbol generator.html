<html>

<head>
	<title>
		Number Caller
	</title>
</head>

<body onload="initializise()" id="body">
	<script>
		if ('speechSynthesis' in window) {
			console.log('Yeah');
		} else {
			console.log('Neah');
		}
		var body = document.getElementById("body");
		var symbolArray = ["H", "He", "Li", "Be", "B", "C", "N", "O", "F", "Ne", "Na", "Mg", "Al", "Si", "P", "S", "Cl", "Ar", "K", "Ca", "Sc", "Ti", "V", "Cr", "Mn", "Fe", "Co", "Ni", "Cu", "Zn", "Ga", "Ge", "As", "Se", "Br", "Kr", "Rb", "Sr", "Y", "Zr", "Nb", "Mo", "Tc", "Ru", "Rh", "Pd", "Ag", "Cd", "In", "Sn", "Sb", "Te", "I", "Xe", "Cs", "Ba", "La", "Ce", "Pr", "Nd", "Pm", "Sm", "Eu", "Gd", "Tb", "Dy", "Ho", "Er", "Tm", "Yb", "Lu", "Hf", "Ta", "W", "Re", "Os", "Ir", "Pt", "Au", "Hg", "Tl", "Pb", "Bi", "Po", "At", "Rn", "Fr", "Ra", "Ac", "Th"];
		var namesArray = ["Hydrogen", "Helium", "Lithium", "Beryllium", "Boron", "Carbon", "Nitrogen", "Oxygen", "Fluorine", "Neon", "Sodium", "Magnesium", "Aluminium", "Silicon", "Phosphorus", "Sulphur", "Chlorine", "Argon", "Potassium", "Calcium", "Scandium", "Titanium", "Vanadium", "Chromium", "Manganese", "Iron", "Cobolt", "Nickel", "Copper", "Zinc", "Gallium", "Germanium", "Arsenic", "Selenium", "Bromine", "Krypton", "Rubidium", "Strontium", "Yttrium", "Zirconium", "Niobium", "Molybdenium", "Technetium", "Ruthenium", "Rhodium", "Palladium", "Silver", "Cadmium", "Indium", "Tin", "Antimony", "Tellurium", "Iodine", "Xenon", "Cesium", "Barium", "Lanthanum", "Cerium", "Praseodymium", "Neodymium", "Promethium", "Samarium", "Europium", "Gadolinium", "Terbium", "Dysprosium", "Holmium", "Erbium", "Thulium", "Ytterbium", "Lutetium", "Hafnium", "Tantalum", "Tungsten", "Rhenium", "Osmium", "Iridium", "Platinum", "Gold", "Mercury", "Thallium", "Lead", "Bismuth", "Polonium", "Astatine", "Radon", "Francium", "Radium", "Actinium", "Thorium"];
		var historyArray = [];
		var undoArray = [];
		var fired = false;
		function initializise() {
			historyArray = JSON.parse(localStorage.getItem('history')) ?? [];
			if (historyArray.length == 0) {
				// initialise the window object as is
				generateGrid(symbolArray);
			}
			else {
				// do stuff
				generateGrid(symbolArray);
				historyArray.forEach((item, index) => {
					markNo(item);
				})
			}
		}

		body.onkeydown = function (event) {
			if (!fired) {
				fired = true;
				var key = event.keyCode;
				if (key == 82) {
					reset();
				}
				else if (key == 80) {
					getnumber();
				}
				else if (key == 90) {
					undo()

				}
				else if (key == 89) {
					redo()
				}
			}
		};

		body.onkeyup = function () {
			fired = false;
		};

		function undo() {
			var conf = confirm('Are you sure you want to undo this action ?');
			if (conf == true) {
				if (historyArray.length !== 0) {
					undoArray.push(historyArray.pop());
				}
				regenrateGridWithCurrent(historyArray);
				localStorage.setItem('history', JSON.stringify(historyArray));
			}
		}

		function redo() {
			var conf = confirm('Are you sure you want to redo this action ?')
			if (conf == true) {
				if (undoArray.length !== 0) {
					historyArray.push(undoArray.pop());
				}
				regenrateGridWithCurrent(historyArray);
				localStorage.setItem('history', JSON.stringify(historyArray));
			}
		}

		function regenrateGridWithCurrent(historyArray) {
			x = historyArray.slice(historyArray.length - 1)
			if (!isNaN(x)) {
				document.getElementById("no").innerHTML = symbolArray[x];
				document.getElementById("Element").innerHTML = namesArray[x];
			}
			generateGrid(symbolArray);
			historyArray.forEach((item, index) => {
				markNo(item);
			});
		}

		function generateGrid(symArray) {
			for (var j = 0; j < 90; j++) {
				var k = j + 1;
				document.getElementById(k).innerHTML = "<font size = '14'><center><B>" + symArray[j] + "</B><center></font>";
			}
		}

		function markNo(num) {
			document.getElementById(num + 1).innerHTML = "<font style = 'text-decoration: line-through;'size = '14'><center><B>" + symbolArray[num] + "</B><center></font>";
		}

		function unmarkNo(num) {
			document.getElementById(num + 1).innerHTML = "<font size = '14'><center><B>" + symbolArray[num] + "</B><center></font>";
		}

		function reset() {
			var r = confirm("Are You Sure You Want To Reset!");
			if (r == true) {
				localStorage.clear();
				location.reload();
			} else {

			}
		}

		function getVoices() {
			let voices = speechSynthesis.getVoices();
			if (!voices.length) {
				let utterance = new SpeechSynthesisUtterance("");
				speechSynthesis.speak(utterance);
				voices = speechSynthesis.getVoices();
			}
			return voices;
		}

		function getnumber() {
			while (true) {
				var x = Math.floor((Math.random() * 90));
				if (!historyArray.includes(x)) {
					historyArray.push(x);
					let utterance = new SpeechSynthesisUtterance(namesArray[x]);
					utterance.rate = 0.50;
					utterance.pitch = 1.85;
					speechSynthesis.speak(utterance);
					speechSynthesis.speak(utterance);
					document.getElementById("no").innerHTML = symbolArray[x];
					document.getElementById("Element").innerHTML = namesArray[x];
					markNo(x);
					undoArray = [];
					break;
				}
			}
			localStorage.setItem('history', JSON.stringify(historyArray));
		}

	</script>
	<p id="Element" style="font-size: 30px;"></p>
	<p id="no" style="font-size: 30px;"></p>
	<button onclick="getnumber()"
		style="border-radius: 5px; background-color: #4CAF50; border: none; color: white; padding: 15px 32px; text-align:center; text-decoration: none; display: inline-block; font-size: 16px;">Get
		No</button>
	<button onclick="reset()"
		style="border-radius: 5px; background-color: #ff4d00; border: none; color: white; padding: 15px 32px; text-align:center; text-decoration: none; display: inline-block; font-size: 16px;">Reset</button>
	<button onclick="undo()"
		style="border-radius: 5px; background-color: #ada118; border: none; color: white; padding: 15px 32px; text-align:center; text-decoration: none; display: inline-block; font-size: 16px;">Undo</button>
	<button onclick="redo()"
		style="border-radius: 5px; background-color: #0033ff; border: none; color: white; padding: 15px 32px; text-align:center; text-decoration: none; display: inline-block; font-size: 16px;">Redo</button>

	<div style="width: 100%; display: table;">
		<div style="display: table-row;">
			<div id="1" style="display: table-cell;"></div>
			<div id="11" style="display: table-cell;"></div>
			<div id="21" style="display: table-cell;"></div>
			<div id="31" style="display: table-cell;"></div>
			<div id="41" style="display: table-cell;"></div>
			<div id="51" style="display: table-cell;"></div>
			<div id="61" style="display: table-cell;"></div>
			<div id="71" style="display: table-cell;"></div>
			<div id="81" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="2" style="display: table-cell;"></div>
			<div id="12" style="display: table-cell;"></div>
			<div id="22" style="display: table-cell;"></div>
			<div id="32" style="display: table-cell;"></div>
			<div id="42" style="display: table-cell;"></div>
			<div id="52" style="display: table-cell;"></div>
			<div id="62" style="display: table-cell;"></div>
			<div id="72" style="display: table-cell;"></div>
			<div id="82" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="3" style="display: table-cell;"></div>
			<div id="13" style="display: table-cell;"></div>
			<div id="23" style="display: table-cell;"></div>
			<div id="33" style="display: table-cell;"></div>
			<div id="43" style="display: table-cell;"></div>
			<div id="53" style="display: table-cell;"></div>
			<div id="63" style="display: table-cell;"></div>
			<div id="73" style="display: table-cell;"></div>
			<div id="83" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="4" style="display: table-cell;"></div>
			<div id="14" style="display: table-cell;"></div>
			<div id="24" style="display: table-cell;"></div>
			<div id="34" style="display: table-cell;"></div>
			<div id="44" style="display: table-cell;"></div>
			<div id="54" style="display: table-cell;"></div>
			<div id="64" style="display: table-cell;"></div>
			<div id="74" style="display: table-cell;"></div>
			<div id="84" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="5" style="display: table-cell;"></div>
			<div id="15" style="display: table-cell;"></div>
			<div id="25" style="display: table-cell;"></div>
			<div id="35" style="display: table-cell;"></div>
			<div id="45" style="display: table-cell;"></div>
			<div id="55" style="display: table-cell;"></div>
			<div id="65" style="display: table-cell;"></div>
			<div id="75" style="display: table-cell;"></div>
			<div id="85" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="6" style="display: table-cell;"></div>
			<div id="16" style="display: table-cell;"></div>
			<div id="26" style="display: table-cell;"></div>
			<div id="36" style="display: table-cell;"></div>
			<div id="46" style="display: table-cell;"></div>
			<div id="56" style="display: table-cell;"></div>
			<div id="66" style="display: table-cell;"></div>
			<div id="76" style="display: table-cell;"></div>
			<div id="86" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="7" style="display: table-cell;"></div>
			<div id="17" style="display: table-cell;"></div>
			<div id="27" style="display: table-cell;"></div>
			<div id="37" style="display: table-cell;"></div>
			<div id="47" style="display: table-cell;"></div>
			<div id="57" style="display: table-cell;"></div>
			<div id="67" style="display: table-cell;"></div>
			<div id="77" style="display: table-cell;"></div>
			<div id="87" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="8" style="display: table-cell;"></div>
			<div id="18" style="display: table-cell;"></div>
			<div id="28" style="display: table-cell;"></div>
			<div id="38" style="display: table-cell;"></div>
			<div id="48" style="display: table-cell;"></div>
			<div id="58" style="display: table-cell;"></div>
			<div id="68" style="display: table-cell;"></div>
			<div id="78" style="display: table-cell;"></div>
			<div id="88" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="9" style="display: table-cell;"></div>
			<div id="19" style="display: table-cell;"></div>
			<div id="29" style="display: table-cell;"></div>
			<div id="39" style="display: table-cell;"></div>
			<div id="49" style="display: table-cell;"></div>
			<div id="59" style="display: table-cell;"></div>
			<div id="69" style="display: table-cell;"></div>
			<div id="79" style="display: table-cell;"></div>
			<div id="89" style="display: table-cell;"></div>
		</div>
		<div style="display: table-row;">
			<div id="10" style="display: table-cell;"></div>
			<div id="20" style="display: table-cell;"></div>
			<div id="30" style="display: table-cell;"></div>
			<div id="40" style="display: table-cell;"></div>
			<div id="50" style="display: table-cell;"></div>
			<div id="60" style="display: table-cell;"></div>
			<div id="70" style="display: table-cell;"></div>
			<div id="80" style="display: table-cell;"></div>
			<div id="90" style="display: table-cell;"></div>
		</div>
	</div>
	</div>
</body>

</html>